<div class="overflow-hidden">
  <!-- Contenedor de la tabla -->
  <div class="px-0 pt-0 h-full flex flex-col">
    <div class="overflow-x-auto overflow-auto max-h-[400px] md:flex-grow max-w-full">
      <form [formGroup]="formMovDiarios" id="formMovDiarios" class=""  autocomplete="off">
        <div class="flex justify-end pb-2">
          <!-- <h5 class="mr-3 font-semibold">Gastos adicionales</h5> -->
          <button type="button"
                  (click)="newItem()"
                  class="flex items-center justify-center px-4 py-2 text-xs font-medium text-white rounded-lg bg-blue-700 hover:bg-blue-800 focus:ring-4 focus:ring-blue-300 focus:outline-none">
            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="h-3.5 w-3.5 mr-2 -ml-1">
              <path stroke-linecap="round" stroke-linejoin="round" d="M12 4.5v15m7.5-7.5h-15" />
            </svg>
            Agregar un viaje
          </button>
        </div>
        <table class="w-full min-w-[640px] table-auto">
          <tbody>
            <ng-container formArrayName="viajes">
              <ng-container [formGroupName]="index" *ngFor= "let item of formViajes.controls; let index = index">
                @if(!(item.get('deleted')?.value)){
                  <tr class="">
                    <td class="py-1 px-2 border-b border-blue-gray-50 flex gap-x-2">
                      <div class="flex-initial flex items-center gap-2">
                        <div class="w-5 h-5 rounded-full bg-gray-200 flex justify-center items-center">
                          <span class="text-xs">{{index + 1}}</span>
                        </div>
                        <div class="flex-col w-full relative pt-5">
                          <label class="absolute top-1 mb-2 block text-xs font-medium text-gray-900">Descripción</label>
                          <!-- <mat-form-field class="flex-1 p-0 m-0 w-full text-xs" appearance="outline">
                            <input matInput formControlName="descripcion" style="font-size: 0.85rem !important; line-height: 1rem !important;">
                          </mat-form-field> -->
                          <mat-form-field class="flex-1 p-0 m-0 w-full text-xs" style="font-size: 0.85rem !important; line-height: 1rem !important;" appearance="outline">
                            <mat-select formControlName="destino" class="text-xs" #device (selectionChange)="onTipoChange(device.value, index)">
                              @for (lugar of listaDestinos; track lugar.codigo) {
                                <mat-option [value]="lugar.codigo" style="font-size: 12px;">{{lugar.nombre}}</mat-option>
                              }
                            </mat-select>
                          </mat-form-field>
                        </div>
                      </div>
                      <div class="flex-1 w-full flex items-center gap-1">
                        <div class="flex-col w-full relative pt-5">
                          <label class="absolute top-1 mb-2 block text-xs font-medium text-gray-900">Descripción</label>
                          <mat-form-field class="flex-1 p-0 m-0 w-full text-xs" appearance="outline">
                            <textarea matInput formControlName="descripcion" rows="1" style="font-size: 0.85rem !important; line-height: 1rem !important;"></textarea>
                          </mat-form-field>
                        </div>
                      </div>
                      <div class="flex-initial flex items-center gap-1">
                        <div class="flex-col w-full relative pt-5">
                          <label class="absolute top-1 mb-2 block text-xs font-medium text-gray-900">Valor</label>
                          <mat-form-field class="flex-1 p-0 m-0 text-xs" appearance="outline">
                            <input matInput prefix="$ " mask="separator.2" [leadZero]="true" formControlName="valor" placeholder="$0.00" style="font-size: 0.85rem !important; line-height: 1rem !important; text-align: end !important;">
                          </mat-form-field>
                        </div>
                        <div class="flex-initial">
                          <button type="button" (click)="eliminarItem(item.value, index)" class="text-xs w-full flex items-center justify-center gap-2 hover:text-red-400">
                            <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-5 h-5">
                              <path stroke-linecap="round" stroke-linejoin="round" d="m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.164-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.037-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0" />
                            </svg>
                          </button>
                        </div>
                      </div>
                    </td>
                  </tr>
                }
              </ng-container>
            </ng-container>
          </tbody>
        </table>
      </form>
    </div>
  </div>
</div>
